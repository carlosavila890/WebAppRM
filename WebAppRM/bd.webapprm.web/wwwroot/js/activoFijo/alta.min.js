function eventoMotivoAlta(){$("#IdMotivoAlta").on("change",function(a){partialViewFacturaActivoFijoIsCompra()})}function partialViewFacturaActivoFijoIsCompra(){"Compra"==$("#IdMotivoAlta option:selected").text()?(mostrarLoadingPanel("checkout-form","Cargando detalles de factura..."),$.ajax({url:urlDetalleFacturaAltaActivos,method:"POST",data:{idFacturaActivoFijo:$("#IdFacturaActivoFijo").val()},success:function(a){$("#divOpcionCompra").html(a),Init_DatetimePicker("FacturaActivoFijo_FechaFactura"),Init_FileInput("fileFactura")},complete:function(a){$("#checkout-form").waitMe("hide")}})):$("#divOpcionCompra").html("")}function callBackFunctionEliminarDatoEspecifico(a){deleteRowDetallesActivosFijos("tableDetallesActivoFijoSeleccionados",a),eliminarRecepcionActivoFijoDetalleSeleccionado(a),eliminarComponente(a)}function callBackInicializarTableListadoSeleccion(){initDataTableFiltrado("tableDetallesActivoFijoAltas",[14,16,17,18,19,20])}function callBackFunctionSeleccionAlta(a,o){var e=$("#hComunesComponentes_"+a).val();if(o){adicionarRecepcionActivoFijoDetalleSeleccionado(a,!0),addComponenteToArray(a,a,e.split(","));var i=$("#tableDetallesActivoFijoAltas"+a+"Sucursal").data("idsucursal"),t=$("#tableDetallesActivoFijoAltas"+a+"Sucursal").data("idlibroactivofijo"),l=$("#tableDetallesActivoFijoAltas"+a+"Empleado").data("idempleado");addRowDetallesActivosFijos("tableDetallesActivoFijoSeleccionados","tableDetallesActivoFijoAltas",a,["Codigosecuencial","TipoActivoFijo","ClaseActivoFijo","SubclaseActivoFijo","NombreActivoFijo","Marca","Modelo","Serie","NumeroChasis","NumeroMotor","Placa","NumeroClaveCatastral","Sucursal","Bodega","Empleado","Proveedor","MotivoRecepcion","FechaRecepcion","OrdenCompra","FondoFinanciamiento",'<input type="hidden" id="hComponentes_'+a+'" name="hComponentes_'+a+'" value="'+e+'" />'+('<input type="hidden" class="hiddenIdRecepcionActivoFijoDetalle" id="hIdRecepcionActivoFijoDetalle_'+a+'" name="hIdRecepcionActivoFijoDetalle_'+a+'" value="'+a+'" />')+('<input type="hidden" class="hiddenHEmpleado" id="hEmpleado_'+a+'" name="hEmpleado_'+a+'" value="'+l+'" />')+('<input type="hidden" id="hSucursal_'+a+'" name="hSucursal_'+a+'" value="'+i+'" />')+('<input type="hidden" id="hLibroActivoFijo_'+a+'" name="hLibroActivoFijo_'+a+'" value="'+t+'" />')+('<a href="javascript:void(0);" onclick="cargarFormularioDatosEmpleado('+a+')" class="btnDatosEmpleado" data-idfila="'+a+'" data-toggle="modal" data-target="#myModalEmpleado">Custodio</a>')+('<span> | </span><a href="javascript:void(0);" onclick="cargarFormularioComponentesDatosEspecificos('+a+')" class="btnComponentesDatosEspecificos" data-idfila="'+a+'" data-idorigen="'+a+'" data-toggle="modal" data-target="#myModalComponente">Componentes</a>')+("<div id='divEliminarDatosEspecificos_"+a+"' class='btnEliminarDatosEspecificos' style='display:inline;'><span> | </span><a href='javascript: void(0);' id='btnEliminarDatosEspecifico_"+a+"' onclick=abrirVentanaConfirmacion('btnEliminarDatosEspecifico_"+a+"') data-funcioncallback=callBackFunctionEliminarDatoEspecifico('"+a+"') data-titulo='Eliminar' data-descripcion='&#191; Desea eliminar el Activo Fijo seleccionado... ?'>Eliminar</a></div>")],!0)}else callBackFunctionEliminarDatoEspecifico(a)}function cargarFormularioDatosEmpleado(a){var o=$("#hSucursal_"+a).val(),e=$("#hEmpleado_"+a).val();mostrarLoadingPanel("modalContentEmpleado","Cargando listados de custodios por sucursal..."),$.ajax({url:urlModalEmpleadosResult,method:"POST",data:{idSucursal:o,idEmpleado:e,idRecepcionActivoFijoDetalle:a},success:function(a){$("#inputEmpleado").html(a),Init_Select2()},complete:function(a){$("#modalContentEmpleado").waitMe("hide"),$("#chkTodosEmpleadosDatosEspecificos").prop("checked","")}})}function eventoGuardarDatosEmpleado(){$("#btnGuardarDatosEmpleado").on("click",function(a){mostrarLoadingPanel("modalContentEmpleado","Validando datos, por favor espere...");var t=$("#IdEmpleado").val();if(""!=t&&null!=t){var o=$("#hIdRecepcionActivoFijoDetalleEmpleado").val(),l=$("#hSucursal_"+o).val();if($("#chkTodosEmpleadosDatosEspecificos").prop("checked")){var e=$(".hiddenIdRecepcionActivoFijoDetalle");$.each(e,function(a,o){var e=$(o).val(),i=$("#hSucursal_"+e).val();l==i&&putDatoEmpleadoTable(e,t)})}else putDatoEmpleadoTable(o,t);$("#btnCancelarDatosEmpleado").click()}else $("#valIdEmpleado").html("Tiene que seleccionar un Custodio.");$("#modalContentEmpleado").waitMe("hide")})}function putDatoEmpleadoTable(a,o){$("#hEmpleado_"+a).val(o),$("#tableDetallesActivoFijoSeleccionados"+a+"Empleado").html($("#IdEmpleado option:selected").text())}function validarDatosEspecificosPertenecenEmpleado(){var a=$(".hiddenHEmpleado"),i=!0;return $.each(a,function(a,o){var e=$(o).val();""!=e.toString()&&null!=e||(i=!1)}),i}function eventoGuardar(){$("#btn-guardar").on("click",function(a){var o=$("#tableDetallesActivoFijoSeleccionados").dataTable().api(),e=$("#checkout-form"),i=!0;0==o.rows().nodes().length&&(mostrarNotificacion("Error","Tiene que seleccionar al menos un Activo Fijo."),i=!1),validarDatosEspecificosPertenecenEmpleado()||(mostrarNotificacion("Error","Tiene que seleccionar el Custodio para todos los Activos Fijos seleccionados."),i=!1),e.valid()||(i=!1),i&&$("#btn-guardar").prop("type","submit")})}$(document).ready(function(){Init_Select2(),Init_DatetimePicker("FacturaActivoFijo_FechaFactura"),Init_DatetimePicker("FechaAlta"),eventoMotivoAlta(),inicializarDetallesActivoSeleccion(),inicializarObjetoAdicional(),initDataTableFiltrado("tableDetallesActivoFijoSeleccionados",[13,15,16,17,18,19]),Init_FileInput("file"),Init_FileInput("fileFactura"),eventoGuardarDatosEmpleado(),eventoGuardar(),partialViewFacturaActivoFijoIsCompra()});