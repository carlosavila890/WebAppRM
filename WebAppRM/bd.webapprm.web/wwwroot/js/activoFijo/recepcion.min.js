function gestionarWizard(){var i=$(".wizard").wizard();i.on("finished.fu.wizard",function(i,o){if(!validarWizard())return!1;$("#checkout-form").submit()}),i.on("change.fu.wizard",function(i,o){if("previous"!==o.direction){var e=validarWizard();if(e){if("none"==$("#li_codificacion").css("display"))return $("#checkout-form").submit(),!1;$("#RecepcionActivoFijo_SubClaseActivoFijo_ClaseActivoFijo_TipoActivoFijo_Nombre").val($("#RecepcionActivoFijo_SubClaseActivoFijo_ClaseActivoFijo_IdTipoActivoFijo option:selected").text()),$("#RecepcionActivoFijo_SubClaseActivoFijo_ClaseActivoFijo_Nombre").val($("#RecepcionActivoFijo_SubClaseActivoFijo_IdClaseActivoFijo option:selected").text()),$("#ActivoFijo_CodigoActivoFijo_TAF").val($("#RecepcionActivoFijo_SubClaseActivoFijo_ClaseActivoFijo_IdTipoActivoFijo option:selected").text()),$("#ActivoFijo_CodigoActivoFijo_CAF").val($("#RecepcionActivoFijo_SubClaseActivoFijo_IdClaseActivoFijo option:selected").text())}return e}})}function validarWizard(){return $("#checkout-form").valid()?($("#spanError").html(""),!0):(mostrarNotificacion("Error","Existen errores en el formulario."),$("#spanError").html("El modelo es inválido."),!1)}function configurarDropzone(){var i="image/*,.pdf,.xlsx,.xls,.txt,.docx,.doc";$("#spanExtensionesPermitidas").html(i),Dropzone.autoDiscover=!1,$("#mydropzone").dropzone({acceptedFiles:i,addRemoveLinks:!0,uploadMultiple:!0,parallelUploads:100,paramName:"file",autoProcessQueue:!1,createImageThumbnails:!0,maxThumbnailFilesize:10,maxFilesize:10,dictDefaultMessage:'<span class="text-center"><span class="font-lg visible-xs-block visible-sm-block visible-lg-block"><span class="font-xs"><i class="fa fa-caret-right text-danger"></i> Guardar documentaci&oacute;n o fotograf&iacute;as </span><span>&nbsp&nbsp<h4 class="display-inline"> (Haga clic)</h4></span>',dictResponseError:"¡Error subiendo archivo!",dictRemoveFile:"Eliminar archivo",dictFileTooBig:"El archivo es muy grande ({{filesize}} MB). Tamaño máximo permitido: {{maxFilesize}} MB.",dictInvalidFileType:"El archivo no está permitido.",dictResponseError:"Error {{statusCode}} al intentar subir el archivo.",dictCancelUpload:"Cancelar archivo",dictCancelUploadConfirmation:"¿Desea cancelar la subida del archivo?",dictMaxFilesExceeded:"Ha excedido el número de archivos a subir ({{maxFiles}} ficheros).",init:function(){this.on("removedfile",function(i,o){$.ajax({url:urlEliminarActivoFijo,method:"POST",data:{fileName:i.name,dir:$("#dir").val()},error:function(o){mostrarNotificacion("Error","No se pudo eliminar o no se encontró el archivo "+i.name+".")}})}),this.on("success",function(i,o){$("#dir").val(o.value),$("#nombreCarpeta").val(o.value)}),this.on("error",function(i,o){this.removeFile(i),mostrarNotificacion("Error","El sistema no tiene permisos suficientes para guardar la información.")})}})}function eventoValidacionTecnicaChange(){$("#RecepcionActivoFijo_ValidacionTecnica").on("change",function(i){mostrarOcultarDatosEspecificosCodificacion(!!isEditar||i.currentTarget.checked)})}function mostrarOcultarDatosEspecificosCodificacion(i){if(i){try{$("#li_codificacion").hide()}catch(i){}$("#btn-atras").hide(),$("#btn-guardar").html("Guardar<i class='fa fa-arrow-right'></i>")}else{try{$("#li_codificacion").show()}catch(i){}$("#btn-atras").show(),$("#btn-guardar").html("Siguiente<i class='fa fa-arrow-right'></i>")}}function eventoTipoActivoFijo(){$("#RecepcionActivoFijo_SubClaseActivoFijo_ClaseActivoFijo_IdTipoActivoFijo").on("change",function(i){partialViewTipoActivoFijo(i.val)})}function eventoClaseActivoFijo(){$("#RecepcionActivoFijo_SubClaseActivoFijo_IdClaseActivoFijo").on("change",function(i){partialViewClaseActivoFijo(i.val)})}function eventoMarca(){$("#ActivoFijo_Modelo_IdMarca").on("change",function(i){mostrarLoadingPanel("checkout-form","Cargando modelos..."),$.ajax({url:urlModeloSelectResult,method:"POST",data:{idMarca:i.val},success:function(i){$("#div_modelo").html(i),Init_Select2()},complete:function(i){$("#checkout-form").waitMe("hide")}})})}function eventoPais(){$("#ActivoFijo_LibroActivoFijo_Sucursal_Ciudad_Provincia_IdPais").on("change",function(i){partialViewProvincia(i.val)})}function eventoProvincia(){$("#ActivoFijo_LibroActivoFijo_Sucursal_Ciudad_IdProvincia").on("change",function(i){partialViewCiudad(i.val)})}function eventoCiudad(){$("#ActivoFijo_LibroActivoFijo_Sucursal_IdCiudad").on("change",function(i){partialViewSucursal(i.val)})}function eventoSucursal(){$("#ActivoFijo_LibroActivoFijo_IdSucursal").on("change",function(i){partialViewLibroActivoFijo(i.val)})}function partialViewProvincia(i){mostrarLoadingPanel("checkout-form","Cargando provincias..."),$.ajax({url:provinciaSelectResult,method:"POST",data:{idPais:obtenerIdAjax(i)},success:function(i){$("#div_provincia").html(i),Init_Select2()},error:function(i){$("#checkout-form").waitMe("hide")},complete:function(i){eventoProvincia(),partialViewCiudad($("#ActivoFijo_LibroActivoFijo_Sucursal_Ciudad_IdProvincia").val())}})}function partialViewCiudad(i){mostrarLoadingPanel("checkout-form","Cargando ciudades..."),$.ajax({url:ciudadSelectResult,method:"POST",data:{idProvincia:obtenerIdAjax(i)},success:function(i){$("#div_ciudad").html(i),Init_Select2()},error:function(i){$("#checkout-form").waitMe("hide")},complete:function(i){eventoCiudad(),partialViewSucursal($("#ActivoFijo_LibroActivoFijo_Sucursal_IdCiudad").val())}})}function partialViewSucursal(i){mostrarLoadingPanel("checkout-form","Cargando sucursales..."),$.ajax({url:sucursalSelectResult,method:"POST",data:{idCiudad:obtenerIdAjax(i)},success:function(i){$("#div_sucursal").html(i),Init_Select2()},error:function(i){$("#checkout-form").waitMe("hide")},complete:function(i){eventoSucursal(),partialViewLibroActivoFijo($("#ActivoFijo_LibroActivoFijo_IdSucursal").val())}})}function partialViewLibroActivoFijo(i){mostrarLoadingPanel("checkout-form","Cargando libros de activo fijo..."),$.ajax({url:libroActivoFijoSelectResult,method:"POST",data:{idSucursal:obtenerIdAjax(i)},success:function(i){$("#div_libroActivoFijo").html(i),Init_Select2()},complete:function(i){$("#checkout-form").waitMe("hide")}})}function partialViewTipoActivoFijo(i){mostrarLoadingPanel("checkout-form","Cargando clases de activo fijo..."),$.ajax({url:claseActivoFijoSelectResult,method:"POST",data:{idTipoActivoFijo:obtenerIdAjax(i)},success:function(i){$("#div_claseActivoFijo").html(i),Init_Select2()},error:function(i){$("#checkout-form").waitMe("hide")},complete:function(i){partialViewClaseActivoFijo($("#RecepcionActivoFijo_SubClaseActivoFijo_IdClaseActivoFijo").val()),eventoClaseActivoFijo()}})}function partialViewClaseActivoFijo(i){mostrarLoadingPanel("checkout-form","Cargando sub clases de activo fijo..."),$.ajax({url:subClaseActivoFijoSelectResult,method:"POST",data:{idClaseActivoFijo:obtenerIdAjax(i)},success:function(i){$("#div_subClaseActivoFijo").html(i),Init_Select2()},complete:function(i){$("#checkout-form").waitMe("hide")}})}$(document).ready(function(){Init_Select2(),Init_Touchspin(),eventoTipoActivoFijo(),eventoClaseActivoFijo(),eventoMarca(),eventoPais(),eventoProvincia(),eventoCiudad(),eventoSucursal(),eventoValidacionTecnicaChange(),gestionarWizard(),Init_DatetimePicker("RecepcionActivoFijo_FechaRecepcion"),mostrarOcultarDatosEspecificosCodificacion(!!isEditar||$("#RecepcionActivoFijo_ValidacionTecnica").prop("checked")),Init_FileInput("file")});